<div class="header_path">prototype/driver/ublox.hpp</div>

<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_msg_t {
  bool ok;
  uint8_t msg_class;
  uint8_t msg_id;
  uint16_t payload_length;
  uint8_t ck_a;
  uint8_t ck_b;

  ubx_msg_t();
  ubx_msg_t(const uint8_t *msg_data);
  ubx_msg_t(const uint8_t msg_class_,
            const uint8_t msg_id_,
            const uint16_t length_,
            const uint8_t *payload_);
};</code></pre>
  
  <div class="doc"><p><h2>UBX Class IDs</h2>
<p>NAV 0x01 Navigation Results: Position, Speed, Time, Acceleration, Heading,
DOP, SVs used RXM 0x02 Receiver Manager: Satellite Status, RTC Status INF
0x04 Information: Printf-Style Messages, with IDs such as Error, Warning,
Notice ACK 0x05 Ack/Nak: Acknowledge or Reject messages to UBX-CFG input
messages CFG 0x06 Configuration Input: Set Dynamic Model, Set DOP Mask, Set
Baud Rate, etc. UPD 0x09 Firmware Update: Memory/Flash erase/write, Reboot,
Flash identification, etc. MON 0x0A Monitoring: Communication Status, CPU
Load, Stack Usage, Task Status TIM 0x0D Timing: Time Pulse Output, Time Mark
Results MGA 0x13 Multiple GNSS Assistance: Assistance data for various GNSS
LOG 0x21 Logging: Log creation, deletion, info and retrieval
SEC 0x27 Security Feature</p>
<h2>UBX Class CFG</h2>
<p>ACK-ACK 0x05 0x01 2 Output Message Acknowledged
ACK-NAK 0x05 0x00 2 Output Message Not-Acknowledged</p>
<h2>UBX Class CFG</h2>
<p>CFG-VALDEL 0x06 0x8C 4 + 4<em>N Set Deletes values corresponding to...
CFG-VALGET 0x06 0x8B 4 + 4</em>N Poll Request Get Configuration Items
CFG-VALSET 0x06 0x8A 4 + 1*N Set Sets values corresponding to provided...</p>
<h2>UBX Class MON Monitoring Messages</h2>
<p>MON-COMMS 0x0A 0x36 8 + 40<em>nPorts Periodic/Polled Comm port information
MON-GNSS 0x0A 0x28 8 Polled Information message major GNSS...
MON-HW2 0x0A 0x0B 28 Periodic/Polled Extended Hardware Status
MON-HW3 0x0A 0x37 22 + 6</em>nPins Periodic/Polled HW I/O pin information
MON-HW 0x0A 0x09 60 Periodic/Polled Hardware Status
MON-IO 0x0A 0x02 0 + 20<em>N Periodic/Polled I/O Subsystem Status
MON-MSGPP 0x0A 0x06 120 Periodic/Polled Message Parse and Process Status
MON-PATCH 0x0A 0x27 4 + 16</em>nEntries Polled Output information about installed...
MON-RF 0x0A 0x38 4 + 24<em>nBlocks Periodic/Polled RF information
MON-RXBUF 0x0A 0x07 24 Periodic/Polled Receiver Buffer Status
MON-RXR 0x0A 0x21 1 Output Receiver Status Information
MON-TXBUF 0x0A 0x08 28 Periodic/Polled Transmitter Buffer Status
MON-VER 0x0A 0x04 40 + 30</em>N Polled Receiver/Software Version</p>
<h2>UBX Class NAV Navigation Results Messages</h2>
<p>NAV-CLOCK 0x01 0x22 20 Periodic/Polled Clock Solution
NAV-DOP 0x01 0x04 18 Periodic/Polled Dilution of precision
NAV-EOE 0x01 0x61 4 Periodic End Of Epoch
NAV-GEOFENCE 0x01 0x39 8 + 2<em>numFe... Periodic/Polled Geofencing status
NAV-HPPOSECEF 0x01 0x13 28 Periodic/Polled High Precision Position Solution
in ECEF NAV-HPPOSLLH 0x01 0x14 36 Periodic/Polled High Precision Geodetic
Position Solution NAV-ODO 0x01 0x09 20 Periodic/Polled Odometer Solution
NAV-ORB 0x01 0x34 8 + 6</em>numSv Periodic/Polled GNSS Orbit Database Info
NAV-POSECEF 0x01 0x01 20 Periodic/Polled Position Solution in ECEF
NAV-POSLLH 0x01 0x02 28 Periodic/Polled Geodetic Position Solution
NAV-PVT 0x01 0x07 92 Periodic/Polled Navigation Position Velocity Time...
NAV-RELPOSNED 0x01 0x3C 64 Periodic/Polled Relative Positioning Information
in... NAV-RESETODO 0x01 0x10 0 Command Reset odometer NAV-SAT 0x01 0x35 8 +
12<em>numSvs Periodic/Polled Satellite Information NAV-SIG 0x01 0x43 8 +
16</em>numSi... Periodic/Polled Signal Information NAV-STATUS 0x01 0x03 16
Periodic/Polled Receiver Navigation Status NAV-SVIN 0x01 0x3B 40
Periodic/Polled Survey-in data NAV-TIMEBDS 0x01 0x24 20 Periodic/Polled BDS
Time Solution NAV-TIMEGAL 0x01 0x25 20 Periodic/Polled Galileo Time Solution
NAV-TIMEGLO 0x01 0x23 20 Periodic/Polled GLO Time Solution
NAV-TIMEGPS 0x01 0x20 16 Periodic/Polled GPS Time Solution
NAV-TIMELS 0x01 0x26 24 Periodic/Polled Leap second event information
NAV-TIMEUTC 0x01 0x21 20 Periodic/Polled UTC Time Solution
NAV-VELECEF 0x01 0x11 20 Periodic/Polled Velocity Solution in ECEF
NAV-VELNED 0x01 0x12 36 Periodic/Polled Velocity Solution in NED</p>
<h2>UBX Class RXM Receiver Manager Messages</h2>
<p>RXM-MEASX 0x02 0x14 44 + 24<em>num... Periodic/Polled Satellite Measurements for
RRLP RXM-PMREQ 0x02 0x41 8 Command Requests a Power Management task RXM-PMREQ
0x02 0x41 16 Command Requests a Power Management task RXM-RAWX 0x02 0x15 16 +
32</em>num... Periodic/Polled Multi-GNSS Raw Measurement Data RXM-RLM 0x02 0x59
16 Output Galileo SAR Short-RLM report RXM-RLM 0x02 0x59 28 Output Galileo
SAR Long-RLM report RXM-RTCM 0x02 0x32 8 Output RTCM input status RXM-SFRBX
0x02 0x13 8 + 4*numW... Output</p>
<hr />
<p>UBX Message</p>
<hr />
<p>UBX Message</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_dop_t {
  uint32_t itow;
  uint16_t gdop;
  uint16_t pdop;
  uint16_t tdop;
  uint16_t vdop;
  uint16_t hdop;
  uint16_t ndop;
  uint16_t edop;

  ubx_nav_dop_t();
  ubx_nav_dop_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-DOP</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_eoe_t {
  uint32_t itow;

  ubx_nav_eoe_t();
  ubx_nav_eoe_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-EOE</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_hpposllh_t {
  uint8_t version;
  uint32_t itow;
  int32_t lon;
  int32_t lat;
  int32_t height;
  int32_t hmsl;
  int8_t lon_hp;
  int8_t lat_hp;
  int8_t height_hp;
  int8_t hmsl_hp;
  uint32_t hacc;
  uint32_t vacc;

  ubx_nav_hpposllh_t();
  ubx_nav_hpposllh_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-HPPOSLLH</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_pvt_t {
  uint32_t itow;
  uint16_t year;
  uint8_t month;
  uint8_t day;
  uint8_t hour;
  uint8_t min;
  uint8_t sec;
  uint8_t valid;
  uint32_t tacc;
  int32_t nano;
  uint8_t fix_type;
  uint8_t flags;
  uint8_t flags2;
  uint8_t num_sv;
  uint32_t lon;
  uint32_t lat;
  uint32_t height;
  uint32_t hmsl;
  int32_t hacc;
  int32_t vacc;
  int32_t veln;
  int32_t vele;
  int32_t veld;
  int32_t gspeed;
  int32_t headmot;
  uint32_t sacc;
  uint32_t headacc;
  uint16_t pdop;
  int32_t headveh;
  int16_t magdec;
  uint16_t magacc;

  ubx_nav_pvt_t();
  ubx_nav_pvt_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-PVT</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_status_t {
  uint32_t itow;
  uint8_t fix;
  uint8_t flags;
  uint8_t fix_status;
  uint8_t flags2;
  uint32_t ttff;
  uint32_t msss;

  ubx_nav_status_t();
  ubx_nav_status_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-STATUS</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_svin_t {
  uint32_t itow;
  uint32_t dur;
  int32_t mean_x;
  int32_t mean_y;
  int32_t mean_z;
  int8_t mean_xhp;
  int8_t mean_yhp;
  int8_t mean_zhp;
  uint32_t mean_acc;
  uint32_t obs;
  uint8_t valid;
  uint8_t active;

  ubx_nav_svin_t();
  ubx_nav_svin_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-SVIN</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_nav_velned_t {
  uint32_t itow;
  int32_t veln;
  int32_t vele;
  int32_t veld;
  uint32_t speed;
  uint32_t gspeed;
  int32_t heading;
  uint32_t sacc;
  uint32_t cacc;

  ubx_nav_velned_t();
  ubx_nav_velned_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-NAV-VELNED</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_mon_rf_t {
  uint8_t version;
  uint32_t nblocks;
  std::vector&lt;uint8_t&gt; block_id;
  std::vector&lt;uint8_t&gt; flags;
  std::vector&lt;uint8_t&gt; ant_status;
  std::vector&lt;uint8_t&gt; ant_power;
  std::vector&lt;uint32_t&gt; post_status;
  std::vector&lt;uint16_t&gt; noise_per_ms;
  std::vector&lt;uint16_t&gt; agc_cnt;
  std::vector&lt;uint8_t&gt; jam_ind;
  std::vector&lt;int8_t&gt; ofs_i;
  std::vector&lt;uint8_t&gt; mag_i;
  std::vector&lt;int8_t&gt; ofs_q;
  std::vector&lt;uint8_t&gt; mag_q;

  ubx_mon_rf_t();
  ubx_mon_rf_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-MON-RF</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_rxm_rtcm_t {
  uint8_t flags;
  uint16_t sub_type;
  uint16_t ref_station;
  uint16_t msg_type;

  ubx_rxm_rtcm_t();
  ubx_rxm_rtcm_t(const ubx_msg_t &amp;msg);
};</code></pre>
  
  <div class="doc"><p><p>UBX-RXM-RTCM</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ubx_parser_t {
  int state;
  size_t buf_pos;
  ubx_msg_t msg;

  ubx_parser_t();
};</code></pre>
  
  <div class="doc"><p><hr />
<p>UBX Stream Parser</p>
<hr />
<p>UBX Stream Parser States</p>
<p>UBX Stream Parser</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct rtcm3_parser_t {
  size_t buf_pos;
  size_t msg_len;
  size_t msg_type;

  rtcm3_parser_t();
};</code></pre>
  
  <div class="doc"><p><hr />
<p>RTCM3 Stream Parser</p>
<hr />
<p>RTCM3 Stream Parser</p></p></div>
  
</div> <!-- .cpp_class -->
<!-- CLASSES -->
<div class="cpp_class">
  <pre><code class="cpp">struct ublox_t {
  bool ok;
  uart_t uart;
  int sockfd;
  std::vector&lt;int&gt; conns;
  std::string msg_type;
  ubx_parser_t ubx_parser;
  rtcm3_parser_t rtcm3_parser;

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  std::function &lt; void(ublox_t &amp;ublox);

  ublox_t(const std::string &amp;port, const int speed);
  ublox_t(const uart_t &amp;uart);
  ~ublox_t();
};</code></pre>
  
  <div class="doc"><p><hr />
<p>UBlox</p>
<hr />
<p>UBlox</p></p></div>
  
</div> <!-- .cpp_class -->

<!-- FUNCTIONS -->
<h2>Functions</h2>

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_msg_parse(ubx_msg_t &amp;msg, const uint8_t *data);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_msg_serialize(const ubx_msg_t &amp;msg,
                       uint8_t *frame,
                       size_t &amp;frame_size);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_msg_checksum(const uint8_t msg_class,
                      const uint8_t msg_id,
                      const uint16_t payload_length,
                      const uint8_t *payload,
                      uint8_t &amp;ck_a,
                      uint8_t &amp;ck_b);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_msg_checksum(const ubx_msg_t &amp;msg, uint8_t &amp;ck_a, uint8_t &amp;ck_b);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">bool ubx_msg_is_valid(const ubx_msg_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_msg_print(const ubx_msg_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void print_ubx_nav_hpposllh(const ubx_nav_hpposllh_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void print_ubx_nav_pvt(const ubx_nav_pvt_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void print_ubx_nav_status(const ubx_nav_status_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void print_ubx_nav_svin(const ubx_nav_svin_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void print_ubx_rxm_rtcm(const ubx_rxm_rtcm_t &amp;msg);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ubx_parser_reset(ubx_parser_t &amp;parser);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_parser_update(ubx_parser_t &amp;parser, uint8_t data);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void rtcm3_parser_reset(rtcm3_parser_t &amp;parser);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int rtcm3_parser_update(rtcm3_parser_t &amp;parser, uint8_t data);
</code></pre>
  
  <div class="doc"><p><h2>RTCM 3.2 Frame</h2>
<p>Byte 0: Always 0xD3
Byte 1: 6-bits of zero
Byte 2: 10-bits of length of this packet including the first two-ish header
        bytes, + 6.
byte 3 + 4: Msg type 12 bits</p>
<p>Example [Msg type 1087]:</p>
<p>D3 00 7C 43 F0 ...</p>
<p>Where 0x7C is the payload size = 124
= 124 + 6 [header]
= 130 total bytes in this packet</p></p><hr></div>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_connect(ublox_t &amp;ublox);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_write(const ublox_t &amp;ublox,
              uint8_t msg_class,
              uint8_t msg_id,
              uint16_t length,
              uint8_t *payload);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_poll(const ublox_t &amp;ublox,
             const uint8_t msg_class,
             const uint8_t msg_id,
             uint16_t &amp;payload_length,
             uint8_t *payload,
             const bool expect_ack,
             const int retry);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_read_ack(const ublox_t &amp;ublox, uint8_t msg_class, uint8_t msg_id);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_val_get(const ublox_t &amp;ublox,
                const uint8_t layer,
                const uint32_t key,
                uint32_t &amp;val);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ubx_val_set(const ublox_t &amp;ublox,
                const uint8_t layer,
                const uint32_t key,
                const uint32_t val,
                const uint8_t val_size);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ublox_version(const ublox_t &amp;ublox);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_parse_ubx(ublox_t &amp;ublox, uint8_t data);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_parse_rtcm3(ublox_t &amp;ublox, uint8_t data);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_base_station_config(ublox_t &amp;base);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ublox_base_station_loop(ublox_t &amp;base);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_base_station_run(ublox_t &amp;base, const int port);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_rover_config(ublox_t &amp;rover);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">void ublox_rover_loop(ublox_t &amp;rover);
</code></pre>
  
</div> <!-- .cpp_func -->

<div class="cpp_func" onclick=show_doc(this)>
  <pre><code class="cpp">int ublox_rover_run(ublox_t &amp;rover,
                    const std::string &amp;base_ip,
                    const int base_port);
</code></pre>
  
</div> <!-- .cpp_func -->



</div> <!-- #content -->