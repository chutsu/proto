<h1>Gauge</h1>

Gauge theory is borrowed from physics.

Accurate structure from motion or vision based state estimation is hard. One
hurdle is addressing the accuracy quantitatively. There are two main problems
that arise:

\begin{itemize}
  \item{\textbf{Inherent Physical Indeterminancy}: cause by loss of information
    while projecting 3D objects onto a 2D image plane.}
  \item{\textbf{Overparameterized Problem}: e.g. a shape model that can be
    parameterized by a vector, each representing the absolute position and
    orientation of the object could itself be indeterminant.}
\end{itemize}

It is well known that a vision only bundle adjustment has 7 unobserable
degrees-of-freedom (DoF), while for a VI-system, the global position and global
yaw is not observable, a total of four unobservable DoFs. These unobservable
DoFs (a.k.a gauge freedoms) have to be handled properly.

There are three main approaches to address the unobservability in a VI-system.
They are \textit{gauge fixation}, \textit{gauge prior}, \textit{free gauge}.


\subsection{Gauge fixation}

Gauge fixation method works by decreasing the number of optimization parameters to
where there are no unobservable states left for the opitmization problem to
optimize. This is to ensure the Hessian is well conditioned and invertable.
This approach enforces hard constraints to the solution.

The standard method to update orientation variables such as a rotation,
$\rot$, during the iterations of a non-linear least squares solver is to use
local coordinates, where at the $k$-th iteration, the update is
<equation>
  \label{eq:opt-rot_std_update}
  \rot^{k + 1} = \text{Exp}(\delta \boldsymbol{\phi}^{k}) \rot^{k} .
</equation>

Setting the $z$ component of $\boldsymbol{\phi}^{k}$ to 0 allows fixating the
yaw with respect to $\rot^{k}$. However, concatenating several such updates
over $K$-iterations,
<equation>
  \rot^{K} = \prod^{K-1}_{k=0} \text{Exp}(\delta \boldsymbol{\phi}^{k}) ,
</equation>
does not fixate the yaw with respect to the initial rotation $\rot^{0}$, and
therefore, this parameterization cannot be used to fix the yaw-value of
$\rot^{K}$ to that of the initial value $\rot^{0}$.

Although pose fixation or prior can be applied to any camera pose, it is common
practice to fixate the first camera.
<equation>
  \pos_{0} = \pos^{0}_{0} ,
  \enspace
  \Delta \boldsymbol{\phi}_{0 z}
    \dot{=} \, \Vec{e}^{\transpose}_{z} \boldsymbol{\phi}_{0} = 0 \, ,
</equation>
where $\pos^{0}_{0}$ is the initial position of the first camera. Which is
equivalent to setting the corresponding columns of the Jacobian of the residual
vector to zero, namely $\jac_{\pos_0} = 0$, $\jac_{\Delta \phi_{0 z}} = 0$.
Thus, for rotations of the other camera poses, the standard iterative update
Eq.~\eqref{eq:opt-rot_std_update} is used, and, for the first camera rotation,
$\rot_{0}$, a more convenient parameterization is used. Instead of directly
using $\rot_{0}$, a left-multiplicative increment is used.
<equation>
  \rot_{0} = \text{Exp}(\Delta \boldsymbol{\phi}_{0}) \rot^{0}_{0} \, ,
</equation>
where the rotation vector $\Delta \boldsymbol{\phi}_{0}$ is initialized to zero
and updated.


\subsection{Gauge prior}

Gauge prior augments the objective function with an additional penalty to favor
a solution that satisfies certain constraints in a soft manner.
<equation>
  \Norm{\Vec{e}^{\pos}_{0}}^{2}_{\Sigma^{\pos}_{0}} \, ,
  \quad \text{where} \quad
  \Vec{e}^{\pos}_{0}(\boldsymbol{\theta})
    \enspace \dot{=} \enspace
    (\pos_{0} - \pos^{0}_{0}, \enspace \Delta \phi_{0 z})
</equation>



\subsection{Free gauge}

Free gauge is the most general, lets the optimization parameters evolve freely.
In order to deal with the singularity with the Hessian, the pseudo inverse is
used or some preconditioning method inorder to make the Hessian
well-conditioned and invertible.
